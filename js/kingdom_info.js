const langKingdomInfo = {
    en: "Kingdom Info",
    de: "Königreich-Info",
    fr: "Info du Royaume",
    es: "Información del Reino",
    pt: "Informações do Reino",
    tr: "Krallık Bilgisi",
    ru: "Информация о Королевстве",
    zh: "王国信息",
};

const langAge = { 
    en: "Age", 
    de: "Zeitalter", 
    fr: "Âge", 
    es: "Edad", 
    pt: "Idade", 
    tr: "Çağ", 
    ru: "Эпоха", 
    zh: "时代", 
};

const langAgePoints = {  
    en: "Age Points: ", 
    de: "Zeitalter-Punkte: ", 
    fr: "Points d’Âge: ", 
    es: "Puntos de Edad: ", 
    pt: "Pontos de Idade: ", 
    tr: "Çağ Puanı: ", 
    ru: "Очки Эпохи: ", 
    zh: "时代点数: ", 
};

const langEconomy = {   
    en: "Economy", 
    de: "Wirtschaft", 
    fr: "Économie", 
    es: "Economía", 
    pt: "Economia", 
    tr: "Ekonomi", 
    ru: "Экономика", 
    zh: "经济", 
};

const langFood1 = {    
    en: "Food: ",  
    de: "Essen: ", 
    fr: "Nourriture: ", 
    es: "Comida: ", 
    pt: "Comida: ", 
    tr: "Gıda: ", 
    ru: "Еда: ", 
    zh: "食物: ", 
};

const langFood2 = {     
    en: " food/hour",   
    de: " essen/Stunde", 
    fr: " nourriture/heure", 
    es: " comida/hora", 
    pt: " comida/hora", 
    tr: " gıda/saat", 
    ru: " eда/час", 
    zh: " 食物/小时", 
};

const langFood3 = {    
    en: " Food",  
    de: " Essen", 
    fr: " Nourriture", 
    es: " Comida", 
    pt: " Comida", 
    tr: " Gıda", 
    ru: " Еда", 
    zh: " 食物", 
};

const langWood1 = {      
    en: "Wood: ",    
    de: "Holz: ", 
    fr: "Bois: ", 
    es: "Madera: ", 
    pt: "Madeira: ", 
    tr: "Odun: ", 
    ru: "Дерево: ", 
    zh: "木材: ", 
};

const langWood2 = {      
    en: " wood/hour",    
    de: " holz/Stunde", 
    fr: " bois/heure", 
    es: " madera/hora", 
    pt: " madeira/hora", 
    tr: " odun/saat", 
    ru: " дерево/час", 
    zh: " 木材/小时", 
};

const langGold1 = {       
    en: "Gold: ",     
    de: "Gold: ", 
    fr: "Or: ", 
    es: "Oro: ", 
    pt: "Ouro: ", 
    tr: "Altın: ", 
    ru: "Золото: ", 
    zh: "黄金: ", 
};

const langGold2 = {       
    en: " gold/hour",     
    de: " gold/Stunde", 
    fr: " or/heure", 
    es: " oro/hora", 
    pt: " ouro/hora", 
    tr: " altın/saat", 
    ru: " золото/час", 
    zh: " 黄金/小时", 
};

const langKC = {        
    en: "Kingdom Center: ",      
    de: "Königszentrum: ", 
    fr: "Centre du Royaume: ", 
    es: "Centro del Reino: ", 
    pt: "Centro do Reino: ", 
    tr: "Krallık Merkezi: ", 
    ru: "Центр Королевства: ", 
    zh: "王国中心: ", 
};

const langGC = {         
    en: "Colonies: ",       
    de: "Kolonien: ", 
    fr: "Colonies: ", 
    es: "Colonias: ", 
    pt: "Colônias: ", 
    tr: "Koloniler: ", 
    ru: "Колонии: ", 
    zh: "殖民地: ", 
};

const langAlliance = {          
    en: "Alliance: ",       
    de: "Allianz: ", 
    fr: "Alliance: ", 
    es: "Alianza: ", 
    pt: "Aliança: ", 
    tr: "İttifak: ", 
    ru: "Альянс: ", 
    zh: "联盟: ", 
};

const langCities = {           
    en: "Cities: ",       
    de: "Städte: ", 
    fr: "Villes: ", 
    es: "Ciudades: ", 
    pt: "Cidades: ", 
    tr: "Şehirler: ", 
    ru: "Города: ", 
    zh: "城市: ", 
};

const langPopulation = {            
    en: "Population",       
    de: "Bevölkerung", 
    fr: "Population", 
    es: "Población", 
    pt: "População", 
    tr: "Nüfus", 
    ru: "Население", 
    zh: "人口", 
};

const langVillagers = {             
    en: "Villagers: ",       
    de: "Dorfbewohner: ", 
    fr: "Villageois: ", 
    es: "Aldeanos: ", 
    pt: "Aldeões: ", 
    tr: "Köylüler: ", 
    ru: "Жители деревни: ", 
    zh: "村民: ", 
};

const langFarmer = {              
    en: "Farmer: ",       
    de: "Bauer: ", 
    fr: "Fermier: ", 
    es: "Granjero: ", 
    pt: "Agricultor: ", 
    tr: "Çiftçi: ", 
    ru: "Фермер: ", 
    zh: "农民: ", 
};

const langTroops = {               
    en: "Troops: ",       
    de: "Truppen: ", 
    fr: "Troupes: ", 
    es: "Tropas: ", 
    pt: "Tropas: ", 
    tr: "Birlikler: ", 
    ru: "Войска: ", 
    zh: "军队: ", 
};

const langSupportT = {                
    en: "Support Troops: ",       
    de: "Unterstützungs-Truppen: ", 
    fr: "Troupes de soutien: ", 
    es: "Tropas de apoyo: ", 
    pt: "Tropas de apoio: ", 
    tr: "Destek Birlikleri: ", 
    ru: "Вспомогательные войска: ", 
    zh: "支援部队: ", 
};

const langSpies = {                 
    en: "Spies: ",        
    de: "Spione: ", 
    fr: "Espions: ", 
    es: "Espías: ", 
    pt: "Espiões: ", 
    tr: "Casuslar: ", 
    ru: "Шпионы: ", 
    zh: "间谍: ", 
};

const langWoodcutter = {                  
    en: "Woodcutter: ",         
    de: "Holzfäller: ", 
    fr: "Bûcheron: ", 
    es: "Leñador: ", 
    pt: "Lenhador: ", 
    tr: "Oduncu: ", 
    ru: "Дровосек: ", 
    zh: "伐木工: ", 
};

const langGoldMiner = {                   
    en: "Gold Miner: ",          
    de: "Goldgräber: ", 
    fr: "Mineur d'or: ", 
    es: "Minero de oro: ", 
    pt: "Minerador de ouro: ", 
    tr: "Altın Madencisi: ", 
    ru: "Золотодобытчик: ", 
    zh: "金矿工: ", 
};

const langStorageL = {                    
    en: "Storage Limit",          
    de: "Speicherlimit", 
    fr: "Limite de stockage", 
    es: "Límite de almacenamiento", 
    pt: "Limite de Armazenamento", 
    tr: "Depo Kapasitesi", 
    ru: "Лимит хранилища", 
    zh: "存储上限", 
};

const langDarkAge = {
    en: "Dark Age",
    de: "Dunkles Zeitalter",
    fr: "Âge Sombre",
    es: "Edad Oscura",
    pt: "Idade das Trevas",
    tr: "Karanlık Çağ",
    ru: "Тёмные Века",
    zh: "黑暗时代",
};

const langFeudalAge = {
    en: "Feudal Age",
    de: "Feudalzeit",
    fr: "Âge Féodal",
    es: "Edad Feudal",
    pt: "Idade Feudal",
    tr: "Feodal Çağ",
    ru: "Феодальная Эпоха",
    zh: "封建时代",
};

const langCastleAge = {
    en: "Castle Age",
    de: "Burgenzeit",
    fr: "Âge des Châteaux",
    es: "Edad de los Castillos",
    pt: "Idade dos Castelos",
    tr: "Kale Çağı",
    ru: "Эпоха Замков",
    zh: "城堡时代",
};

const langImperialAge = {
    en: "Imperial Age",
    de: "Imperialzeit",
    fr: "Âge Impérial",
    es: "Edad Imperial",
    pt: "Idade Imperial",
    tr: "İmparatorluk Çağı",
    ru: "Имперская Эпоха",
    zh: "帝国时代",
};

const langNewAge = {
    en: "New Age",
    de: "Neue Zeit",
    fr: "Nouvel Âge",
    es: "Nueva Edad",
    pt: "Nova Era",
    tr: "Yeni Çağ",
    ru: "Новая Эпоха",
    zh: "新时代",
};

const langNextAgePoints1 = {
    en: "500 age points to next age",
    de: "500 Alters-Punkte bis zum nächsten Zeitalter",
    fr: "500 points d'âge pour passer à l'âge suivant",
    es: "500 puntos de edad para la siguiente era",
    pt: "500 pontos de era para a próxima idade",
    tr: "Bir sonraki çağa geçmek için 500 çağ puanı",
    ru: "500 очков эпохи до следующей эры",
    zh: "距离下一时代还需500年龄点",
};

const langNextAgePoints2 = {
    en: "1500 age points to next age",
    de: "1500 Alters-Punkte bis zum nächsten Zeitalter",
    fr: "1500 points d'âge pour passer à l'âge suivant",
    es: "1500 puntos de edad para la siguiente era",
    pt: "1500 pontos de era para a próxima idade",
    tr: "Bir sonraki çağa geçmek için 1500 çağ puanı",
    ru: "1500 очков эпохи до следующей эры",
    zh: "距离下一时代还需1500年龄点",
};

const langNextAgePoints3 = {
    en: "2500 age points to next age",
    de: "2500 Alters-Punkte bis zum nächsten Zeitalter",
    fr: "2500 points d'âge pour passer à l'âge suivant",
    es: "2500 puntos de edad para la siguiente era",
    pt: "2500 pontos de era para a próxima idade",
    tr: "Bir sonraki çağa geçmek için 2500 çağ puanı",
    ru: "2500 очков эпохи до следующей эры",
    zh: "距离下一时代还需2500年龄点",
};

const langNextAgePoints4 = {
    en: "5000 age points to next age",
    de: "5000 Alters-Punkte bis zum nächsten Zeitalter",
    fr: "5000 points d'âge pour passer à l'âge suivant",
    es: "5000 puntos de edad para la siguiente era",
    pt: "5000 pontos de era para a próxima idade",
    tr: "Bir sonraki çağa geçmek için 5000 çağ puanı",
    ru: "5000 очков эпохи до следующей эры",
    zh: "距离下一时代还需5000年龄点",
};
	
const lang = localStorage.getItem("language") || "en";
const lang_langNextAgePoints1 = langNextAgePoints1[lang] || "500 age points to next age";
const lang_langNextAgePoints2 = langNextAgePoints2[lang] || "1500 age points to next age";
const lang_langNextAgePoints3 = langNextAgePoints3[lang] || "2500 age points to next age";
const lang_langNextAgePoints4 = langNextAgePoints4[lang] || "5000 age points to next age";
const lang_DarkAge = langDarkAge[lang] || "Dark Age";
const lang_FeudalAge = langFeudalAge[lang] || "Feudal Age";
const lang_CastleAge = langCastleAge[lang] || "Castle Age";
const lang_ImperialAge = langImperialAge[lang] || "Imperial Age";
const lang_NewAge = langNewAge[lang] || "New Age";
const lang_KingdomInfo = langKingdomInfo[lang] || "Kingdom Info";
const lang_Age = langAge[lang] || "Age";
const lang_AgePoints = langAgePoints[lang] || "Age Points: ";
const lang_Economy = langEconomy[lang] || "Economy";
const lang_Food1 = langFood1[lang] || "Food: ";
const lang_Food2 = langFood2[lang] || " food/hour";
const lang_Food3 = langFood3[lang] || " Food";
const lang_Wood1 = langWood1[lang] || " wood/hour";
const lang_Wood2 = langWood2[lang] || "Wood";
const lang_Gold1 = langGold1[lang] || "Gold: ";
const lang_Gold2 = langGold2[lang] || " gold/hour";
const lang_KC = langKC[lang] || "Kingdom Center: ";
const lang_GC = langGC[lang] || "Colonies: ";
const lang_Alliance = langAlliance[lang] || "Alliance: ";
const lang_Cities = langCities[lang] || "Cities: ";
const lang_Population = langPopulation[lang] || "Population";
const lang_Villagers = langVillagers[lang] || "Villagers: ";
const lang_Farmer = langFarmer[lang] || "Farmer: ";
const lang_Troops = langTroops[lang] || "Troops: ";
const lang_SupportT = langSupportT[lang] || "Support Troops: ";
const lang_Spies = langSpies[lang] || "Spies: ";
const lang_Woodcutter = langWoodcutter[lang] || "Woodcutter: ";
const lang_GoldMiner = langGoldMiner[lang] || "Gold Miner: ";
const lang_StorageL = langStorageL[lang] || "Storage Limit";

async function save() {
  
  document.getElementById("title_lang").innerText = lang_KingdomInfo;
  document.getElementById("age_lang").innerText = lang_Age;
  document.getElementById("age_points_lang").innerText = lang_AgePoints;
  document.getElementById("economy_lang").innerText = lang_Economy;
  document.getElementById("food_lang").innerText = lang_Food1;
  document.getElementById("food_lang2").innerText = lang_Food1;
  document.getElementById("foodh_lang").innerText = lang_Food2;
  document.getElementById("food2_lang").innerText = lang_Food3;
  document.getElementById("food3_lang").innerText = lang_Food3;
  document.getElementById("wood_lang").innerText = lang_Wood1;
  document.getElementById("wood_lang2").innerText = lang_Wood1;
  document.getElementById("woodh_lang").innerText = lang_Wood2;
  document.getElementById("gold_lang").innerText = lang_Gold1;
  document.getElementById("gold_lang2").innerText = lang_Gold1;
  document.getElementById("goldh_lang").innerText = lang_Gold2;
  document.getElementById("kc_lang").innerText = lang_KC;
  document.getElementById("kc_lang2").innerText = lang_KC;
  document.getElementById("kc_lang3").innerText = lang_KC;
  document.getElementById("colonies_lang").innerText = lang_GC;
  document.getElementById("colonies_lang2").innerText = lang_GC;
  document.getElementById("colonies_lang3").innerText = lang_GC;
  document.getElementById("alliance_lang").innerText = lang_Alliance;
  document.getElementById("cities_lang").innerText = lang_Cities;
  document.getElementById("cities_lang2").innerText = lang_Cities;
  document.getElementById("cities_lang3").innerText = lang_Cities;
  document.getElementById("population_lang").innerText = lang_Population;
  document.getElementById("villagers_lang").innerText = lang_Villagers;
  document.getElementById("farmer_lang").innerText = lang_Farmer;
  document.getElementById("troops_lang").innerText = lang_Troops;
  document.getElementById("support_t_lang").innerText = lang_SupportT;
  document.getElementById("spies_lang").innerText = lang_Spies;
  document.getElementById("woodcutter_lang").innerText = lang_Woodcutter;
  document.getElementById("gold_miner_lang").innerText = lang_GoldMiner;
  document.getElementById("storage_lang").innerText = lang_StorageL;
  
  const token = localStorage.getItem("token");
	const world = localStorage.getItem("world");

    if (token == null || world == null) return;

    try {
        const response = await fetch("/users_world", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ token, world })
        });

        const data = await response.json();

        if (!data.error) {
			
			if (data.age_points < 500) {
				document.getElementById("top1_border_img").style.backgroundImage = "url('images/age_1.png')";
				document.getElementById("age_text").innerText = lang_DarkAge;
				document.getElementById("next_age_text").innerText = lang_langNextAgePoints1;
				document.getElementById("sl_food").innerText = "10K";
				document.getElementById("sl_wood").innerText = "10K";
				document.getElementById("sl_gold").innerText = "100K";
			} else if (data.age_points < 1500) {
				document.getElementById("top1_border_img").style.backgroundImage = "url('images/age_2.png')";
				document.getElementById("age_text").innerText = lang_FeudalAge;
				document.getElementById("next_age_text").innerText = lang_langNextAgePoints2;
				document.getElementById("sl_food").innerText = "20K";
				document.getElementById("sl_wood").innerText = "20K";
				document.getElementById("sl_gold").innerText = "∞";
			} else if (data.age_points < 2500) {
				document.getElementById("top1_border_img").style.backgroundImage = "url('images/age_3.png')";
				document.getElementById("age_text").innerText = lang_CastleAge;
				document.getElementById("next_age_text").innerText = lang_langNextAgePoints3;
				document.getElementById("sl_food").innerText = "50K";
				document.getElementById("sl_wood").innerText = "50K";
				document.getElementById("sl_gold").innerText = "∞";
			} else if (data.age_points < 5000) {
				document.getElementById("top1_border_img").style.backgroundImage = "url('images/age_4.png')";
				document.getElementById("age_text").innerText = lang_ImperialAge;
				document.getElementById("next_age_text").innerText = lang_langNextAgePoints4;
				document.getElementById("sl_food").innerText = "75K";
				document.getElementById("sl_wood").innerText = "75K";
				document.getElementById("sl_gold").innerText = "∞";
			} else if (data.age_points < Infinity) {
				document.getElementById("top1_border_img").style.backgroundImage = "url('images/age_5.png')";
				document.getElementById("age_text").innerText = lang_NewAge;
				document.getElementById("sl_food").innerText = "100K";
				document.getElementById("sl_wood").innerText = "100K";
				document.getElementById("sl_gold").innerText = "∞";
			}
			
			document.getElementById("age_points").innerText = data.age_points;
			
			if (data.age_points >= 5000) {
				document.getElementById("next_age_div").style.display = "none";
			}
							 
		    let food_hour_net = (100 + ((data.farmer * 30) + (data.farmer * data.farmer_lvl * 3))) * 
                 (data.food_percent + (data.farming_lvl / 100)) - 
                  data.spearman - data.archer - data.spy - data.cataphract - 
                  data.swordsman - data.crossbowman - data.arquebusiers - data.ballista - 
                  data.onager - data.cannon - data.farmer - data.woodcutter - data.gold_miner -
				  data.knight - data.imperial_spearman;
				  
		    let food_hour_p = (100 + ((data.farmer * 30) + (data.farmer * data.farmer_lvl * 3))) *
 			     (data.food_percent + (data.farming_lvl / 100));
				  
			let food_hour_m = (data.spearman + data.archer + data.spy + data.cataphract + 
                  data.swordsman + data.crossbowman + data.arquebusiers + data.ballista + 
                  data.onager + data.cannon + data.farmer + data.woodcutter + data.gold_miner +
				  data.knight + data.imperial_spearman);
				  
			let wood_hour = 
                 ((data.woodcutter * 20) + (data.woodcutter * data.woodcutter_lvl * 2)) * 
                 (data.wood_percent + (data.lumbering_lvl / 100));
				 
			let gold_hour = 
                 ((data.gold_miner * 10) + (data.gold_miner * data.gold_miner_lvl * 1)) * 
                 (data.gold_percent + (data.mining_lvl / 100)) + 
                  data.gold_c + data.gold_a + data.gold_city;
				  
			let gold_hour_kc = 
                 ((data.gold_miner * 10) + (data.gold_miner * data.gold_miner_lvl * 1)) * 
                 (data.gold_percent + (data.mining_lvl / 100));
				 
			let gold_hour_c = data.gold_c;
			let gold_hour_a = data.gold_a;
			let gold_hour_ct = data.gold_city;
			
			document.getElementById("total_food_p").innerText = Math.floor(food_hour_net);
			document.getElementById("net_food_p").innerText = Math.floor(food_hour_p);
			document.getElementById("net_food_m").innerText = Math.floor(food_hour_m);
			document.getElementById("total_wood_p").innerText = Math.floor(wood_hour);
			document.getElementById("total_gold_p").innerText = Math.floor(gold_hour);
			document.getElementById("kc_gold").innerText = Math.floor(gold_hour_kc);
			document.getElementById("c_gold").innerText = Math.floor(gold_hour_c);
			document.getElementById("a_gold").innerText = Math.floor(gold_hour_a);
			document.getElementById("ct_gold").innerText = Math.floor(gold_hour_ct);
			
			let total_villagers = data.farmer + data.woodcutter + data.gold_miner;
			
			document.getElementById("total_food_villagers").innerText = total_villagers;
			document.getElementById("farmer").innerText = data.farmer;
			document.getElementById("woodcutter").innerText = data.woodcutter;
			document.getElementById("gold_miner").innerText = data.gold_miner;
			
			let total_troops = data.spearman + data.archer + data.cataphract + data.swordsman + data.crossbowman + 
			                   data.arquebusiers + data.knight + data.imperial_spearman + data.ballista + data.onager + 
							   data.cannon + data.c_troops + data.city_troops + data.s_troops;
			
			let total_kc_troops = data.spearman + data.archer + data.cataphract + data.swordsman + data.crossbowman + 
			                   data.arquebusiers + data.knight + data.imperial_spearman + data.ballista + data.onager + data.cannon;
			
			document.getElementById("total_troops").innerText = total_troops;
			document.getElementById("kc_t").innerText = total_kc_troops;
			document.getElementById("c_t").innerText = data.c_troops;
			document.getElementById("ct_t").innerText = data.city_troops;
			document.getElementById("sp_t").innerText = data.s_troops;
			
			let total_spy = data.spy + data.c_spy + data.city_spy;
			
			document.getElementById("total_spies").innerText = total_spy;
			document.getElementById("kc_s").innerText = data.spy;
			document.getElementById("c_s").innerText = data.c_spy;
			document.getElementById("ct_s").innerText = data.city_spy;
			
        }
    } catch (error) {
    console.error(error);
    showToast("Server error.");
    }
  
}

setInterval(async () => {
	
	const token = localStorage.getItem("token");
	const world = localStorage.getItem("world");

    if (token == null || world == null) return;

    try {
        const response = await fetch("/users_world", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ token, world })
        });

        const data = await response.json();

        if (!data.error) {
			
			if (data.age_points < 500) {
				document.getElementById("top1_border_img").style.backgroundImage = "url('images/age_1.png')";
				document.getElementById("age_text").innerText = lang_DarkAge;
				document.getElementById("next_age_text").innerText = lang_langNextAgePoints1;
				document.getElementById("sl_food").innerText = "10K";
				document.getElementById("sl_wood").innerText = "10K";
				document.getElementById("sl_gold").innerText = "100K";
			} else if (data.age_points < 1500) {
				document.getElementById("top1_border_img").style.backgroundImage = "url('images/age_2.png')";
				document.getElementById("age_text").innerText = lang_FeudalAge;
				document.getElementById("next_age_text").innerText = lang_langNextAgePoints2;
				document.getElementById("sl_food").innerText = "20K";
				document.getElementById("sl_wood").innerText = "20K";
				document.getElementById("sl_gold").innerText = "∞";
			} else if (data.age_points < 2500) {
				document.getElementById("top1_border_img").style.backgroundImage = "url('images/age_3.png')";
				document.getElementById("age_text").innerText = lang_CastleAge;
				document.getElementById("next_age_text").innerText = lang_langNextAgePoints3;
				document.getElementById("sl_food").innerText = "50K";
				document.getElementById("sl_wood").innerText = "50K";
				document.getElementById("sl_gold").innerText = "∞";
			} else if (data.age_points < 5000) {
				document.getElementById("top1_border_img").style.backgroundImage = "url('images/age_4.png')";
				document.getElementById("age_text").innerText = lang_ImperialAge;
				document.getElementById("next_age_text").innerText = lang_langNextAgePoints4;
				document.getElementById("sl_food").innerText = "75K";
				document.getElementById("sl_wood").innerText = "75K";
				document.getElementById("sl_gold").innerText = "∞";
			} else if (data.age_points < Infinity) {
				document.getElementById("top1_border_img").style.backgroundImage = "url('images/age_5.png')";
				document.getElementById("age_text").innerText = lang_NewAge;
				document.getElementById("sl_food").innerText = "100K";
				document.getElementById("sl_wood").innerText = "100K";
				document.getElementById("sl_gold").innerText = "∞";
			}
			
			document.getElementById("age_points").innerText = data.age_points;
			
			if (data.age_points >= 5000) {
				document.getElementById("next_age_div").style.display = "none";
			}
							 
		    let food_hour_net = (100 + ((data.farmer * 30) + (data.farmer * data.farmer_lvl * 3))) * 
                 (data.food_percent + (data.farming_lvl / 100)) - 
                  data.spearman - data.archer - data.spy - data.cataphract - 
                  data.swordsman - data.crossbowman - data.arquebusiers - data.ballista - 
                  data.onager - data.cannon - data.farmer - data.woodcutter - data.gold_miner -
				  data.knight - data.imperial_spearman;
				  
		    let food_hour_p = (100 + ((data.farmer * 30) + (data.farmer * data.farmer_lvl * 3))) *
 			     (data.food_percent + (data.farming_lvl / 100));
				  
			let food_hour_m = (data.spearman + data.archer + data.spy + data.cataphract + 
                  data.swordsman + data.crossbowman + data.arquebusiers + data.ballista + 
                  data.onager + data.cannon + data.farmer + data.woodcutter + data.gold_miner +
				  data.knight + data.imperial_spearman);
				  
			let wood_hour = 
                 ((data.woodcutter * 20) + (data.woodcutter * data.woodcutter_lvl * 2)) * 
                 (data.wood_percent + (data.lumbering_lvl / 100));
				 
			let gold_hour = 
                 ((data.gold_miner * 10) + (data.gold_miner * data.gold_miner_lvl * 1)) * 
                 (data.gold_percent + (data.mining_lvl / 100)) + 
                  data.gold_c + data.gold_a + data.gold_city;
				  
			let gold_hour_kc = 
                 ((data.gold_miner * 10) + (data.gold_miner * data.gold_miner_lvl * 1)) * 
                 (data.gold_percent + (data.mining_lvl / 100));
				 
			let gold_hour_c = data.gold_c;
			let gold_hour_a = data.gold_a;
			let gold_hour_ct = data.gold_city;
			
			document.getElementById("total_food_p").innerText = Math.floor(food_hour_net);
			document.getElementById("net_food_p").innerText = Math.floor(food_hour_p);
			document.getElementById("net_food_m").innerText = Math.floor(food_hour_m);
			document.getElementById("total_wood_p").innerText = Math.floor(wood_hour);
			document.getElementById("total_gold_p").innerText = Math.floor(gold_hour);
			document.getElementById("kc_gold").innerText = Math.floor(gold_hour_kc);
			document.getElementById("c_gold").innerText = Math.floor(gold_hour_c);
			document.getElementById("a_gold").innerText = Math.floor(gold_hour_a);
			document.getElementById("ct_gold").innerText = Math.floor(gold_hour_ct);
			
			let total_villagers = data.farmer + data.woodcutter + data.gold_miner;
			
			document.getElementById("total_food_villagers").innerText = total_villagers;
			document.getElementById("farmer").innerText = data.farmer;
			document.getElementById("woodcutter").innerText = data.woodcutter;
			document.getElementById("gold_miner").innerText = data.gold_miner;
			
			let total_troops = data.spearman + data.archer + data.cataphract + data.swordsman + data.crossbowman + 
			                   data.arquebusiers + data.knight + data.imperial_spearman + data.ballista + data.onager + 
							   data.cannon + data.c_troops + data.city_troops + data.s_troops;
			
			let total_kc_troops = data.spearman + data.archer + data.cataphract + data.swordsman + data.crossbowman + 
			                   data.arquebusiers + data.knight + data.imperial_spearman + data.ballista + data.onager + data.cannon;
			
			document.getElementById("total_troops").innerText = total_troops;
			document.getElementById("kc_t").innerText = total_kc_troops;
			document.getElementById("c_t").innerText = data.c_troops;
			document.getElementById("ct_t").innerText = data.city_troops;
			document.getElementById("sp_t").innerText = data.s_troops;
			
			let total_spy = data.spy + data.c_spy + data.city_spy;
			
			document.getElementById("total_spies").innerText = total_spy;
			document.getElementById("kc_s").innerText = data.spy;
			document.getElementById("c_s").innerText = data.c_spy;
			document.getElementById("ct_s").innerText = data.city_spy;
			
        }
    } catch (error) {
    console.error(error);
    showToast("Server error.");
    }
	
}, 1000);